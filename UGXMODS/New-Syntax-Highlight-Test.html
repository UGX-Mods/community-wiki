<!--
title: New Syntax Highlight Test
description: 
published: true
date: 2024-01-30T10:32:33.578Z
tags: 
editor: ckeditor
dateCreated: 2024-01-30T10:32:32.516Z
-->

<!-- conf id: 17301740 -->


                    <p>Â </p><p>GSC (this is for WaW, no idea about BO3 yet)</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: gsc; gutter: false; theme: RDark" data-custom-language-resource="com.atlassian.confluence.ext.code.custom.GSC.2995019989107041143:custom-code-syntax-resources" data-theme="RDark">//||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
//|||| Name    : trem_bank_2.gsc 
//|||| Info   	 : This is a bank system where players can deposit and withdraw points from one global total. I am aware this idea has been toyed with many times by many people, but I don&#39;t care as I wanted to make my own. This is completely and totally my code, and has not been ripped/taken from anyone else&#39;s code that I have seen or used. 
//|||| Site       : ugx-mods.com
//|||| Author  : [UGX] treminaor
//|||| Notes    : menu file: trem_bank_mouse.menu or trem_bank_keyboard.menu depending on what you want
//|||| Ver	     : 2.1 - 7/20/2014 | Fixed the default notify waittill name, it was set to a flag. Fixed the Withdrawl limit reached iPrintLn
//||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
#include common_scripts\utility; 
#include maps\_zombiemode_utility;
#include maps\_utility;
bank()
{
	//Don&#39;t touch these//
	level.bank = [];
	level.bank[&quot;total&quot;] = 0;
	level.bank[&quot;drawcount&quot;] = 0;
	level.bank[&quot;drawtimer_number&quot;] = 0;
	level.bank[&quot;debug&quot;] = false;
	level.bank[&quot;status&quot;] = &quot;unlocked&quot;;
	setDvar(&quot;bank_total&quot;, 0); // dont worry about players editing this, it wont actually change the points in the bank - it&#39;s only used for menu purposes. | i went ahead and added a watch func for it just in case tho
	///////////////////////////
	/////////////////////////////////// |Modifcations Section| //////////////////////////////////////////
	level.bank[&quot;withdrawl_enabled&quot;]		= true; // Change this to false to disable the withdrawl penalty.
	level.bank[&quot;withdrawl_limit&quot;]		 	= 8; // Change this number to make the amount of withdrawls allowed before penalty higher or lower.
	level.bank[&quot;penaltytime&quot;]				 	= 60; // Change this number to make the withdrawl penalty longer or shorter. Values are in seconds. .10 would be one tenth of a second and 10 would be ten seconds
	level.bank[&quot;interest_enabled&quot;]			= true; // Change this to false to disable the interest feature.
	level.bank[&quot;interest_interval&quot;] 			= 120; //Change this number to make the interest interval longer or shorter. Values are in seconds. .10 would be one tenth of a second and 10 would be ten seconds
	level.bank[&quot;interest_amount&quot;]			= .10; // Change this number to increase or decrease the amount of interest gained on the bank total. This should be a decimal. It is used this way: level.bank_total*.10; which would return 10% of the total points in the bank, then add that 10% to the overal total (eg 1000*.10 = 100. 1100 is the new total.)
	level.bank[&quot;menu_type&quot;]				 	= &quot;mouse&quot;; // Change &quot;mouse&quot; to &quot;keyboard&quot; if you wish to use a keyboard-based menu instead of a mouse one. You must precache the other menu in your zone_source, etc.
	level.bank[&quot;announce_balance&quot;]		= true; //Change to false if you don&#39;t want the bank to print an updated balance for all players to see after it has been used. Also announces when interest is gained.
	level.bank[&quot;wait_for_notify&quot;]		 	= false; //Change to true if you want to have the bank wait for something to happen before it&#39;s enabled.
	level.bank[&quot;notify&quot;]						 	= &quot;Pack_A_Punch_on&quot;; // If level.bank_wait_for_notify is set to true, you can set the notify here. The default is for the power switch to be flipped, but if you know what you&#39;re doing you can make your own notify.
	level.bank[&quot;notify_string&quot;]			 	= &quot;Power must be on.&quot;; // Chnage this if you need to.
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////
	level.bank_trigs = getEntArray(&quot;trem_bank_trig&quot;,&quot;targetname&quot;);
	if(level.bank[&quot;debug&quot;]) iPrintLn(&quot;Bank: Debug Active.&quot;);
	for(i=0;i&lt;level.bank_trigs.size;i++)
	{
		level.bank_trigs[i] setCursorHint(&quot;HINT_NOICON&quot;);
		if(level.bank[&quot;wait_for_notify&quot;])
			level.bank_trigs[i] setHintString(level.bank[&quot;notify_string&quot;]);
		level.bank_trigs[i] thread bank_hint_swap();
		level.bank_trigs[i] thread bank_trig_setup();
		if(level.bank[&quot;interest_enabled&quot;])
			thread bank_interest_gain();
		thread watch_bank_dvar();
	}
}
 
bank_hint_swap()
{
	while(1)
	{
		if(level.bank[&quot;status&quot;] == &quot;locked&quot;)
			self setHintString(&quot;Withdrawl limit reached. Please wait &quot;+level.bank[&quot;penaltytime&quot;]+&quot; seconds.&quot;);
		else
			self setHintString(&quot;Press &amp;&amp;1 to use the bank (Balance: &quot;+level.bank[&quot;total&quot;]+&quot;)&quot;);
		wait 0.5;
	}
}
 
bank_trig_setup()
{
	if(level.bank[&quot;wait_for_notify&quot;]) 
		level waittill( level.bank[&quot;notify&quot;] );
	while(1)
	{		
		player = undefined;
		self waittill(&quot;trigger&quot;,player);
		menu = &quot;trem_bank_&quot;+level.bank[&quot;menu_type&quot;];
		if(level.bank[&quot;status&quot;] != &quot;locked&quot;)
		{
			player freezeControls(true);
			player disableWeapons();
			player openMenu(menu);
			player bank_logic(menu);
			wait 0.5;
		}
	}
}
 
bank_logic(menu)
{
	self waittill(&quot;menuresponse&quot;, menu, action);
	type = getSubStr(action, 0, 1);
	amount = int(getSubStr(action, 2));
	if(type == &quot;d&quot;) //deposit
	{	
		if(self.score &gt;= amount)
		{
			self maps\_zombiemode_score::minus_to_player_score(amount);
			level.bank[&quot;total&quot;] = level.bank[&quot;total&quot;] + amount;
			if(level.bank[&quot;announce_balance&quot;]) iPrintLn(&quot;Bank: ^2Balance has been increased by &quot;+self.playername+&quot;. It is now &quot;+level.bank[&quot;total&quot;]+&quot; (Increase of &quot;+amount+&quot;).&quot;);
		}
		else
			self iPrintLn(&quot;Bank: ^1&quot;+self.playername+&quot;, you do not have enough points to complete the selected deposit.&quot;);
	}
	else if(type == &quot;w&quot;) //withdraw
	{
		if(level.bank[&quot;total&quot;] &gt;= amount)
		{
			self maps\_zombiemode_score::add_to_player_score(amount);
			level.bank[&quot;total&quot;] = level.bank[&quot;total&quot;] - amount;
			if(level.bank[&quot;announce_balance&quot;]) iPrintLn(&quot;Bank: ^1Balance has been decreased by &quot;+self.playername+&quot;. It is now &quot;+level.bank[&quot;total&quot;]+&quot; (Decrease of &quot;+amount+&quot;).&quot;);
			level.bank[&quot;drawcount&quot;]++;
		}
		else
			self iPrintLn(&quot;Bank: ^1Insufficient Funds!&quot;);
	}
	else
		if(level.bank[&quot;debug&quot;]) iPrintLn(&quot;Bank: menu esc&#39;d&quot;);
	setDvar(&quot;bank_total&quot;, level.bank[&quot;total&quot;]);
	self closeMenu(menu);
	self freezeControls(false);
	self enableWeapons();
	if( level.bank[&quot;withdrawl_enabled&quot;] &amp;&amp; level.bank[&quot;withdrawl_limit&quot;] == level.bank[&quot;drawcount&quot;])
	{
		iPrintLn(&quot;Bank: Withdrawl limit reached by &quot;+self.playername+&quot;. Bank use is forbidden for &quot;+level.bank[&quot;penaltytime&quot;]+&quot; seconds.&quot;);
		level.bank[&quot;status&quot;] = &quot;locked&quot;;
		wait(level.bank[&quot;penaltytime&quot;]);
		level.bank[&quot;status&quot;] = &quot;unlocked&quot;;
		level.bank[&quot;drawcount&quot;] = 0;
	}
}
bank_interest_gain()
{
	while(1)
	{
		if(level.bank[&quot;announce_balance&quot;] &amp;&amp; level.bank[&quot;total&quot;] &gt; 0) iPrintLn(&quot;Bank: ^5Interest gained.&quot;);
		interest = int(level.bank[&quot;total&quot;] * level.bank[&quot;interest_amount&quot;]);
		level.bank[&quot;total&quot;] = level.bank[&quot;total&quot;] + interest;
		wait(level.bank[&quot;interest_interval&quot;]);
	}
}
watch_bank_dvar()
{
	while(1)
	{
		if(level.bank[&quot;total&quot;] != getDvarInt(&quot;bank_total&quot;))
			setDvar(&quot;bank_total&quot;, level.bank[&quot;total&quot;]);
		wait 0.5;
	}
}</pre>
</div></div>
                    