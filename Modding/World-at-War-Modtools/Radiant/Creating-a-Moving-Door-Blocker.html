<!--
title: Creating a Moving Door Blocker
description: 
published: true
date: 2024-01-30T10:32:05.123Z
tags: confluence:1146927  
editor: ckeditor
dateCreated: 2024-01-30T10:32:04.087Z
-->



<div class="contentLayout2">
  <div class="columnLayout two-equal" data-layout="two-equal">
    <div class="cell normal" data-type="normal">
      <div class="innerCell">
        <p>
          Moving doors are a nice touch when a blocker happens to be a door.
          When purchased, the door will swing on a hinge axis or slide off to
          the side instead of just disappearing or flying away.
        </p>
        <p> </p>
        <p>
          <code>
            <div 
              class="confluence-information-macro confluence-information-macro-warning">
              <span 
                class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon"></span>
              <div class="confluence-information-macro-body">
                <p>
                  <strong>WARNING:</strong>
                  This tutorial can only be used if you have applied the UGX
                  Modtools Patch to your World at War installation. To install
                  the patch, refer to
                  <a 
                    href="https://confluence.ugx-mods.com/display/UGXMODS/Modtools+Installation+Guide#ModtoolsInstallationGuide-InstallingtheFiles"
                    rel="nofollow">
                    &quot;Installing the Files&quot;
                  </a>
                  <span class="confluence-link"> </span>
                  in the
                  <span class="confluence-link"> </span>
                  <a 
                    href="https://confluence.ugx-mods.com/display/UGXMODS/Modtools+Installation+Guide"
                    rel="nofollow">
                    <span class="confluence-link">
                      Modtools Installation Guide
                    </span>
                  </a>
                  .
                </p>
              </div>
            </div>
          </code>
        </p>
        <h1 id="CreatingaMovingDoorBlocker-Preparation">Preparation</h1>
        <h2 id="CreatingaMovingDoorBlocker-Itemsneeded">Items needed</h2>
        <p>
          First you must create the door in Radiant. A swinging door blocker
          consists of these items:
        </p>
        <ul>
          <li>One or more trigger_use brushes</li>
          <li>One or more door script_brushmodels or script_models</li>
          <li>
            One or more clip script_brushmodels which prevent players from
            walking through the closed door
          </li>
        </ul>
        <p>
          If you need help creating any of the items, refer to the
          <span class="confluence-link">
            <a href="Creating-Brushes-in-Radiant_1146973.html">
              Creating Brushes in Radiant
            </a>
          </span>
          page.
        </p>
      </div>
    </div>
    <div class="cell normal" data-type="normal">
      <div class="innerCell">
        <p>
          <span 
            class="confluence-embedded-file-wrapper confluence-embedded-manual-size">
            <img 
              class="confluence-embedded-image confluence-external-resource"
              draggable="false"
              height="400"
              src="http://i.imgur.com/Z11b5ei.png"
              data-image-src="http://i.imgur.com/Z11b5ei.png" >
          </span>
        </p>
      </div>
    </div>
  </div>
  <div class="columnLayout single" data-layout="single">
    <div class="cell normal" data-type="normal">
      <div class="innerCell">
        <h1 id="CreatingaMovingDoorBlocker-SettingtheKVP&#39;s">
          Setting the KVP's
        </h1>
        <p>
          <code>
            <div 
              class="confluence-information-macro confluence-information-macro-tip">
              <span 
                class="aui-icon aui-icon-small aui-iconfont-approve confluence-information-macro-icon"></span>
              <div class="confluence-information-macro-body">
                <p>
                  <strong>NOTE:</strong>
                  KVP is an abbreviation for &quot;Key-Value Pair&quot;. When
                  entering a KVP in the Radiant Entity Window,
                  <strong>
                    ensure that you have the entity selected first
                  </strong>
                  . If you do not have an entity selected, Radiant will
                  automatically add the KVP to the &quot;worldspawn&quot;
                  entity. This is BAD and will likely cause your map to crash
                  while loading! In these pages, KVP's are referred to in this
                  format: Key | Value. Note they are separated by a pipe ( | )
                  character. This character should be ignored when entering the
                  Key-Value Pair.
                  <br>
                  <strong>To properly add a KVP to an entity:</strong>
                </p>
                <ul>
                  <li>
                    Select the entity by holding the Shift key on your keyboard
                    followed by clicking the entity(ies) that you wish to add a
                    KVP to.
                  </li>
                  <li>
                    Enter the first value (this is the Key) into the text field
                    labeled &quot;Key&quot;
                  </li>
                  <li>
                    Enter the second value (this is the Value) into the text
                    field labaled &quot;Value&quot;.
                  </li>
                  <li>
                    Press the Enter key on your keyboard to save the KVP to the
                    entity. You should see the KVP appear in the entity's KVP
                    table (located above the Key text field).
                  </li>
                </ul>
              </div>
            </div>
            <br>
          </code>
        </p>
        <h3 id="CreatingaMovingDoorBlocker-Triggers">Triggers</h3>
        <p>
          Select the trigger_use brush(es) and give them the following KVP's:
        </p>
        <div class="table-wrap">
          <table class="confluenceTable">
            <tbody>
              <tr>
                <th class="confluenceTh"><p>Key</p></th>
                <th class="confluenceTh"><p>Value</p></th>
              </tr>
              <tr>
                <td class="confluenceTd"><p>targetname</p></td>
                <td class="confluenceTd"><p>zombie_door</p></td>
              </tr>
              <tr>
                <td class="confluenceTd">
                  <p>
                    <span style="color: rgb(51, 153, 102)">script_flag</span>
                  </p>
                </td>
                <td class="confluenceTd">
                  <p>
                    <span style="color: rgb(51, 153, 102)">
                      &lt;zone_name&gt;
                    </span>
                  </p>
                </td>
              </tr>
              <tr>
                <td class="confluenceTd">
                  <p>
                    <span style="color: rgb(51, 153, 102)">zombie_cost</span>
                  </p>
                </td>
                <td class="confluenceTd">
                  <p>
                    <span style="color: rgb(51, 153, 102)">
                      &lt;any number&gt;
                    </span>
                  </p>
                </td>
              </tr>
              <tr>
                <td class="confluenceTd">
                  <p>
                    <span style="color: rgb(51, 153, 102)">
                      script_noteworthy
                    </span>
                  </p>
                </td>
                <td class="confluenceTd">
                  <p>
                    <span style="color: rgb(51, 153, 102)">&lt;value&gt;</span>
                  </p>
                </td>
              </tr>
              <tr>
                <td class="confluenceTd">
                  <p>
                    <span style="color: rgb(51, 153, 102)">script_sound</span>
                  </p>
                </td>
                <td class="confluenceTd">
                  <p>
                    <span style="color: rgb(51, 153, 102)">
                      &lt;soundalias&gt;
                    </span>
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <ul>
          <li>
            Items highlighted in
            <span style="color: rgb(51, 153, 102)"><code>green</code></span>
            are optional.
          </li>
          <li>
            script_flag's value should be set to the zone name the door unlocks.
            This is not specifically needed if the door doesn't lead to a new
            zone.
          </li>
          <li>
            By default, zombie_cost sets itself to 1000. If you would like to
            set a custom price, set the
            <span style="color: rgb(51, 153, 102)">
              <code>zombie_cost</code>
            </span>
            key and replace '&lt;any number&gt;' with a numerical value.
          </li>
          <li>
            By default, doors can be opened regardless of the power-switch
            status on the map. If you would like the door to be un-buyable until
            the power-switch is activated, set the
            <span style="color: rgb(51, 153, 102)">
              <code>script_noteworthy</code>
            </span>
            and replace &quot;&lt;value&gt; with &quot;electric_door&quot;
            (without quotes).
          </li>
          <li>
            By default, &quot;door_slide_open&quot; is played when a door
            opened. If you would like to use a custom sound, set the
            <span style="color: rgb(51, 153, 102)">
              <code>script_sound</code>
            </span>
            key and replace '&lt;soundalias&gt;' with a valid soundalias name.
            If you would not like any sound to be played other than the purchase
            noise, use &quot;none&quot; (without quotes) for the soundalias
            name.
          </li>
        </ul>
        <h3 id="CreatingaMovingDoorBlocker-Door">Door</h3>
        <p>
          Select the door script_brushmodel(s) or script_model(s) and give them
          the following KVP's:
        </p>
        <div class="table-wrap">
          <table class="confluenceTable">
            <tbody>
              <tr>
                <th class="confluenceTh"><p>Key</p></th>
                <th class="confluenceTh"><p>Value</p></th>
              </tr>
              <tr>
                <td class="confluenceTd"><p>spawnflags</p></td>
                <td class="confluenceTd"><p>1</p></td>
              </tr>
              <tr>
                <td class="confluenceTd"><p>script_string</p></td>
                <td class="confluenceTd"><p>&lt;door_type&gt;</p></td>
              </tr>
              <tr>
                <td class="confluenceTd"><p>script_angles</p></td>
                <td class="confluenceTd"><p>&lt;rotation_angle&gt;</p></td>
              </tr>
              <tr>
                <td class="confluenceTd"><p>script_vector</p></td>
                <td class="confluenceTd"><p>&lt;vector&gt;</p></td>
              </tr>
              <tr>
                <td class="confluenceTd">
                  <p>
                    <span style="color: rgb(51, 153, 102)">
                      script_transition_time
                    </span>
                  </p>
                </td>
                <td class="confluenceTd">
                  <p>
                    <span style="color: rgb(51, 153, 102)">
                      &lt;any number&gt;
                    </span>
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <ul>
          <li>
            Items highlighted in
            <span style="color: rgb(51, 153, 102)"><code>green</code></span>
            are optional.
          </li>
          <li>
            The script_string key can only have two values: &quot;rotate&quot;
            and &quot;move&quot; (without quotes). &quot;rotate&quot; will make
            this a swinging door, and &quot;move&quot; will make this a sliding
            door.
          </li>
          <li>
            The script_angles key is only needed for &quot;rotation&quot; type
            doors. If you have set your door to the &quot;move&quot; type, you
            do not need this KVP. See the appropriate section below to determine
            what to enter for this value.
          </li>
          <li>
            The script_vector key is only needed for &quot;move&quot; type
            doors. If you have set your door to the &quot;rotate&quot; type, you
            do not need this KVP. See the appropriate section below to determine
            what to enter for this value.
          </li>
          <li>
            By default, doors take 1.0 seconds to transition from closed to
            opened. If you would like to use a custom transition time, set the
            <span style="color: rgb(51, 153, 102)">
              <code>script_transition_time</code>
            </span>
            key and replace '&lt;any_number&gt;' with a numerical value
            (measured in seconds).
          </li>
        </ul>
        <h4 id="CreatingaMovingDoorBlocker-DeterminingRotationValues">
          Determining Rotation Values
        </h4>
        <p>
          Determining the correct value for the script_angles key requires a bit
          of thinking or trial and error depending on your understanding of
          angles and axis.
        </p>
        <p>
          The format for this value is &quot;x y z&quot; (without quotes) where
          x is the angle of rotation on the x axis, y is the angle of rotation
          on the y axis, and z is the angle of rotation on the z axis. Generally
          for a regular door the z angle of rotation should always be 0.
        </p>
        <p>
          To determine the X and Y value, you need to look at your door in
          Radiant. If you are using a script_model, this will be easy.
        </p>
        <p>
          <strong>If you are using a script_model</strong>
          , simply select the script_model and rotate it to the position you
          would like it to rotate to when opened. Open the Entity Window and
          click the &quot;angles&quot; Key. Copy its value to your clipboard,
          then paste it as the value of your script_angles key.
        </p>
        <p>
          <strong>If you are using a script_brushmodel</strong>
          , you need to do the following steps:
        </p>
        <ul>
          <li>
            Create a script_brushmodel in the shape of a square. Make it about
            the size of a script_struct, but the size isn't crucial.
          </li>
          <li>
            Position the brush at the lower left or right corner of your door,
            whichever side is &quot;hinged&quot;. The center of this brush is
            going to be the point of rotation for your door.
          </li>
          <li>
            Apply the orange-colored &quot;origin&quot; texture to the
            brushmodel. This texture can be found by going to Textures -&gt;
            Usage -&gt; Tools in Radiant. To reset your texture filter
            afterwords, select All in the Usage menu.
          </li>
          <li>
            Select the origin script_brushmodel first, then select your door
            brushmodel. Press W to link them.
          </li>
        </ul>
        <p>
          Now that you have created a rotation origin brush, select the origin
          brushmodel and rotate it in the direction you want the door to open.
          Open the Entity Window and click the &quot;angles&quot; Key. Copy its
          value to your clipboard, then paste it as the value of your
          script_angles key on the door brushmodel. Now delete the angles KVP
          from the origin brushmodel so that it snaps back to its original
          rotation.
        </p>
        <p>
          <code>
            note|If your door rotates towards you instead of away from you,
            reverse the sign of the script_angles values. For example, 0 165 0
            would become 0 -165 0.
          </code>
        </p>
        <h4 id="CreatingaMovingDoorBlocker-DeterminingVectorValues">
          Determining Vector Values
        </h4>
        <p>
          Determining the correct value for the script_vector key is relatively
          straightforward. Select your door entity and move it to the position
          you would like it to move to when opened. Open the Entity Window and
          click the &quot;origin&quot; Key. Copy its value to your clipboard,
          then paste it somewhere safe for reference. Now press Ctrl+Z on your
          keyboard to move the door back to its original origin. Open the Entity
          Window and click the &quot;origin&quot; Key. Copy its value to your
          clipboard, then paste it somewhere safe for reference. Now, using a
          calculator, subtract the original X value from the moved X value,
          subtract the original Y value from the moved Y value, and subtract the
          original Z value from the moved Z value. You should end up with a new
          set of 3 numbers which are the difference between the original and
          moved positions, respectively. These 3 numbers are your script_vector
          value.
        </p>
        <h3 id="CreatingaMovingDoorBlocker-Clips">Clips</h3>
        <p>
          Select the clip script_brushmodel(s) and give them the following KVP:
        </p>
        <div class="table-wrap">
          <table class="confluenceTable">
            <tbody>
              <tr>
                <th class="confluenceTh"><p>Key</p></th>
                <th class="confluenceTh"><p>Value</p></th>
              </tr>
              <tr>
                <td class="confluenceTd"><p>spawnflags</p></td>
                <td class="confluenceTd"><p>1</p></td>
              </tr>
              <tr>
                <td class="confluenceTd"><p>script_noteworthy</p></td>
                <td class="confluenceTd"><p>clip</p></td>
              </tr>
            </tbody>
          </table>
        </div>
        <h2 id="CreatingaMovingDoorBlocker-TargetinginRadiant">
          Targeting in Radiant
        </h2>
        <p></p>
        <div 
          class="confluence-information-macro confluence-information-macro-tip">
          <span 
            class="aui-icon aui-icon-small aui-iconfont-approve confluence-information-macro-icon"></span>
          <div class="confluence-information-macro-body">
            <p>
              <strong>NOTE:</strong>
              &quot;targeting&quot; is a method for linking entities together in
              a group. Targeting has menu useful applications, such as
              controlling an entity that has multiple pieces. For example, the
              Mystery Box uses targeting to link each separate script_model part
              of the box to the main trigger_use. Targeting generates automatic
              targetname and target KVP's on the affected entities. When two
              items are properly linked together, a red or blue line is drawn
              from the main entity to each of its targets/links in Radiant.
              <br>
              <strong>To properly target one item to another:</strong>
            </p>
            <ul>
              <li>
                Determine which of the affected entities is going to be the
                &quot;root entity&quot;. The root entity is the entity that will
                be referenced by name in script. Root entities are found in
                script by using getEnt(&quot;root_entity_targetname&quot;,
                &quot;targetname&quot;);.
              </li>
              <li>
                Determine which of the affected entities is going to be the
                target/link. The target/link entity(ies) are the
                &quot;children&quot; of the root entity and do not need specific
                targetnames. Target/link entities are found in script by using
                getEnt(root_entity.target, &quot;targetname&quot;);
              </li>
              <li>Deselect all items by pressing ESC on your keyboard</li>
              <li>
                Select the
                <strong>root entity</strong>
                first.
              </li>
              <li>
                Next, select
                <strong>one</strong>
                of the target/link entities and press W on your keyboard. This
                will create the link between the two entities. Repeat this step
                for all target/link children of the root entity until all
                entities have red or blue lines connecting them to the root
                entity.
              </li>
            </ul>
          </div>
        </div>
        <p>
          Now that you have created all of the necessary items and given them
          the correct KVP's, it is time to link the items together using
          targeting.
          <br>
          In this case, the root entity is the trigger_use. If you have more
          than one trigger_use, just pick one to link all entities to. Later we
          will include the remaining trigger_use's.
          <br>
          The children of the trigger_use are the clip(s) and door model(s).
          Link them to the root entity using the instructions above.
        </p>
        <p>
          Once you have linked all the entities to the root trigger_use, copy
          the target KVP from the root trigger_use to each of the remaining
          trigger_use's. The lines should now be going from all trigger_use's.
        </p>
        <h1 id="CreatingaMovingDoorBlocker-FinishingUp">Finishing Up</h1>
        <h3 id="CreatingaMovingDoorBlocker-CreatingcopiesoftheDoor">
          Creating copies of the Door
        </h3>
        <p>
          Now that you have created one working zombie_door blocker, you can
          copy/paste it as many times as you want. Since we used targeting, the
          targetnames of the children are dynamic and will be regernerated for
          every copy. If you used multiple trigger_use's, you will need to
          manually edit the target KVPs for every copy, just as you did in
          section 1.3. Be sure to update the script_flag value if you copy the
          doors for a new zone volume.
        </p>
        <p>Credit: Treminaor</p>
      </div>
    </div>
  </div>
</div>
